Dev-mode:
  new-page:
    cmd: add new page
    process:
      - "Add Page {next page number}? -Y/n"
      - "n"-> break; "Y"-> proceed;
      - "Please enter text: [entry field]"
      - title default - "no title"
      - kill proximity default - NULL
      - mode default - ""
      - tense default - ""
      - true_page default - "unknown"

  edit-page-text:
    cmd: edit page text {page number}
    process:
      - "Current page text: {page text}"
      - "New page text: [entry field]"
      - "Page saved"

  delete-page:
    cmd: delete page
    process: 
      - "This will delete the last saved page, are you sure you wish to proceed? -Y/n"
      - "n"-> break; "Y"-> "Page {page number} has been deleted."


User-mode:
  get-info:
    cmd: show
    subcmds:
      page:
        cmd: show page {page number} ({field})
        process (no field):
          - "Page: {page number}"
          - "Title: {page title}"
          - "Kill proximity: {kill proximity}"
          - "Mode: {mode}"
          - "Tense: {tense}"
          - "True Page: {true_page}"
          - "{text}"
          - "Notes: {notes}"
        process (with field):
          - "Page: {page number}"
          - "{field name}: {field value}"
        tags:
          - l: light - only number and text
          - n: notes - only notes
          - f: full - all links
          - ol: only links

      pages:
        cmd: show pages with {name or nickname} {and/or name or nickname}*
        process (one name):
          - "Pages with {name}:"
          - "{page numbers}"
        process (or):
          - "Pages with one of {namelist}:"
          - "{page numbers}"
        process (and):
          - "Pages with all of {namelist}:"
          - "{page numbers}"
        cmd: show pages at {location} ...
        cmd: show pages at level {location level} ...
        cmd: show pages narrated by {narrator} ...
        cmd: show pages at time {time} ...
        cmd: show pages at time level {time level} ...
        cmd: show pages in group {group} ...

      people:
        cmd: show people (shows all people)
        cmd: show {name or nickname}
        process:
          - "Name: {name}"
          - "Nicknames: {nicknames}"
          - "Appearances: {page numbers}"
          - Additional status if exists (e.g. "Killer")
        tags:
          - g: groups - shows groups, in which person appears
          - n: nicknames - only nicknames
        
      location:
        cmd: show location {name}
      
      locations:
        cmd: show locations
        cmd: show locations in group {group name}

      time:
        cmd: show time {name}

      times:
        cmd: show times
        cmd: show times in group {group name}

      killer:
        cmd: show killer {name}

      killers:
        cmd: show killers
        cmd: show killers in group {group name}

      victim:
        cmd: show victim {name}

      victims:
        cmd: show victims
        cmd: show victims in group {group name}

      narrator:
        cmd: show narrator {name}

      narrators:
        cmd: show narrators
        cmd: show narrators in group {group name}

      extra:
        cmd: show confirmed kills
        cmd: show known page numbers

      group:
        cmd: show group {group name}

      groups:
        cmd: show groups
        cmd: show groups with {name} ...
        cmd: show ungrouped pages


    make-new-entities:
      cmd: add
      subcmds:
        note:
          cmd: add note to {category} {name or page number}
          process:
            - "Notes on {name}: {notes}"
            - "New note: [entry field]"

        notes:
          cmd: add notes to {category} {name or page number}
          process:
            - "Notes on {name}: {notes}"
            - {"New note: [entry field]"}*, ""-> exit;

        group:
          cmd: add group
          process:
            - "Group name: [entry field]"
            - "Group {group name} created."

        people:
          cmd: add person
          cmd: add person to page {page number}

        location:
          cmd: add location
          cmd: add location to page {page number}

        time:
          cmd: add time
          cmd: add time to page {page number}

        narrator:
          cmd: add narrator
          cmd: add narrator to page {page number}
          cmd: {name} is new narrator

        victim:
          cmd: add victim
          cmd: add victim to page {page number}
          cmd: {name} is new victim

        killer:
          cmd: add killer
          cmd: add killer to page {page number}
          cmd: {name} is new killer

        nickname:
          cmd: add nickname to {name}


  link existing entities:
    cmd: link
    subcmds:
      person:
        cmd: link person {name} to page {page number}
        process:
          - Success/Error Message

      location:
        cmd: link location {name} to page {page number}

      time:
        cmd: link time {name} to page {page number}

      group:
        cmd: link page {page number} to group {group name}

      victim:
        cmd: victim {name} is {person name}

      killer:
        cmd: killer {name} is {person name}

      narrator:
        cmd: narrator {name} is {person name}

      murder:
        cmd: {killer name} murdered {victim name}

      relations:
        cmd: order page {number} [directly/sometime] before page {number}
        cmd: order group {name} [before/after] group {name}
        cmd: order page {number} [before/after] group {name}


  change attributes:
    cmd: edit
    subcmds:
      page:
        cmd: edit page {page number} {field}
        process:
          - shows old value, prompts to enter new one
          - "" doesn't change anything
          - field = "" => all mutable fields are changed in series

      group:
        cmd: edit group {name} (only one field)

      person:
        cmd: edit {name}

      nickname:
        cmd: edit nickname {nickname}

      time:
        cmd: edit time {name} {field}

      location:
        cmd: edit location {name} {field}

      narrator:
        cmd: edit narrator {name}

      victim:
        cmd: edit victim {name}

      killer:
        cmd: edit killer {name}

      notes:
        cmd: edit notes {object} {name or number}
        process:
          - list notes numbered
          - user chooses number, enters new text

      relations:
        cmd: edit relations
        process:
          - list them, user chooses and is prompted for inputs


  delete entities:
    cmd: remove
    subcmds:
      group:
        cmd: remove group {group name}
        process:
          - asking for confirmation + bit of info about group
          - first relations, then group

      person:
        cmd: remove {name}

      nickname:
        cmd: remove nickname {nickname}

      time:
        cmd: remove time {name}

      location:
        cmd: remove location {name}

      narrator:
        cmd: remove narrator {name}

      victim:
        cmd: remove victim {name}

      killer:
        cmd: remove killer {name}

      relations:
        cmd: remove relations
        process:
          - list them, user chooses



  unify two entities:
    cmd: merge
    subcmds:
      person:
        cmd: merge person {name1} -> {name2}
        process:
          - person1 is added to person2
          - person1's id's are overwritten with person2's
          - person1's name becomes person2's nickname
          - person1 gets deleted

      narrator:
        cmd: merge narrator {name1} -> {name2}
        process:
          - only possible if both link to the same person, or if one has no link
          - similar process to above

      killer:
        cmd: merge killer {name1} -> {name2}

      victim:
        cmd: merge victim {name1} -> {name2}


  find appearances of strings:
    cmd: find
    search notes:
      cmd: find {text} in notes

    search text:
      cmd: find {text} in text

  miscellaneous:
    cmd: drama-graph (lists all pages with their kill proximities)
